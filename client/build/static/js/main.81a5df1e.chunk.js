(this["webpackJsonpidle-rpg-front"]=this["webpackJsonpidle-rpg-front"]||[]).push([[0],{125:function(e,t,n){},131:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),c=n.n(i),o=(n(125),n(86)),s=n(112),l=n(22),d=n(67),j=n(28),u=n(18),b=(n(131),n(174)),h=n(177),m=n(179),O=n(143),v=n(191),f=n(3),g=Object(b.a)((function(e){return{home:{height:"100%"},innerHome:{margin:"auto"},displayGrid:{margin:e.spacing(3,0,2),alignItems:"center",justifyContent:"center"},startCombat:{color:"white",textDecoration:"none"}}}));function p(){var e=g();return Object(f.jsx)(h.a,{className:"master",children:Object(f.jsx)(m.a,{container:!0,className:e.home,children:Object(f.jsx)(m.a,{container:!0,item:!0,direction:"column",alignItems:"center",className:e.innerHome,children:Object(f.jsxs)(m.a,{container:!0,item:!0,direction:"column",xs:4,className:e.displayGrid,spacing:3,children:[Object(f.jsx)(O.a,{variant:"h5",children:"Bienvenue dans Mon Petit RPG!"}),Object(f.jsx)(v.a,{variant:"contained",color:"primary",children:Object(f.jsx)(j.b,{to:"/character-select",className:e.startCombat,children:"Commencer le combat!"})})]})})})})}var x=n(35),y=n.n(x),k=n(46),C=n(10),I=n(38),w=n(180),S=n(190),N=n(34),M=Object(a.createContext)(void 0);function q(){return Object(a.useContext)(M)}var D,P={isAuthenticated:!1,signin:function(e){P.isAuthenticated=!0,e()},signout:function(e){P.isAuthenticated=!1,e()}};var T,A=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),E=Object(N.a)(D||(D=Object(I.a)(["\n    mutation signup($user: UserInput!) {\n        signup(user: $user){\n            token\n        }\n    }\n"])));function F(){var e=A(),t=Object(a.useState)(),n=Object(C.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(),o=Object(C.a)(c,2),s=o[0],d=o[1],j=Object(a.useState)(),b=Object(C.a)(j,2),g=b[0],p=b[1],x=Object(a.useState)(),I=Object(C.a)(x,2),N=I[0],M=I[1],D=Object(l.useMutation)(E),P=Object(C.a)(D,2),T=P[0],F=P[1].error,L=q(),$=Object(u.g)(),W=!0,G=function(e){switch(e.target.name){case"username":i(e.target.value);break;case"pwd":d(e.target.value);break;case"lastname":M(e.target.value);break;case"firstname":p(e.target.value);break;case"pwd-confirm":W=e.target.value&&e.target.value===s}},R=function(){var e=Object(k.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:r,pwd:s,firstname:g,lastname:N},e.prev=2,e.next=5,T({variables:{user:n}});case 5:a=e.sent,console.log(a),null===L||void 0===L||L.signin(a.data.token),$.push("/character-select"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(h.a,{component:"main",maxWidth:"xs",children:[Object(f.jsx)(w.a,{}),Object(f.jsxs)("div",{className:e.paper,children:[Object(f.jsx)(O.a,{component:"h1",variant:"h5",children:"Cr\xe9ez votre compte"}),Object(f.jsx)("form",{className:e.form,onSubmit:R,autoComplete:"off",children:Object(f.jsxs)(m.a,{container:!0,direction:"column",children:[Object(f.jsx)(S.a,{variant:"outlined",type:"text",label:"Nom",id:"lastname",name:"lastname",margin:"normal",required:!0,fullWidth:!0,onChange:G}),Object(f.jsx)(S.a,{variant:"outlined",type:"text",label:"Pr\xe9nom",id:"firstname",name:"firstname",margin:"normal",required:!0,fullWidth:!0,onChange:G}),Object(f.jsx)(S.a,{variant:"outlined",type:"email",name:"username",id:"username",label:"Adresse email",margin:"normal",required:!0,fullWidth:!0,onChange:G}),Object(f.jsx)(S.a,{variant:"outlined",type:"password",label:"Mot de Passe",id:"pwd",name:"pwd",margin:"normal",required:!0,fullWidth:!0,onChange:G}),Object(f.jsx)(S.a,{variant:"outlined",type:"password",label:"Confirmer le Mot de Passe",id:"pwd-confirm",name:"pwd-confirm",margin:"normal",required:!0,fullWidth:!0,onChange:G,error:!W}),Object(f.jsx)(v.a,{variant:"contained",type:"submit",color:"primary",className:e.submit,children:"Connexion"}),F?Object(f.jsx)(O.a,{variant:"subtitle1",style:{color:"red"},children:F.message}):void 0]})})]})]})}var L=Object(b.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),$=Object(l.gql)(T||(T=Object(I.a)(["\n    mutation login($user: LoginInput!) {\n        login(user: $user)\n    }\n    \n"])));function W(){var e=L(),t=Object(a.useState)(),n=Object(C.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(),o=Object(C.a)(c,2),s=o[0],d=o[1],b=Object(l.useMutation)($),g=Object(C.a)(b,2),p=g[0],x=g[1].error,I=Object(u.g)(),N=Object(u.h)(),M=q(),D=(N.state||{from:{pathname:"/"}}).from;console.log(D);var P=function(e){switch(e.target.name){case"username":i(e.target.value);break;case"pwd":d(e.target.value)}},T=function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p({variables:{user:{username:r,pwd:s}}});case 4:n=e.sent,console.log(n.data.login),null===M||void 0===M||M.signin(n.data.login,(function(){I.replace(D)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(h.a,{component:"main",maxWidth:"xs",children:[Object(f.jsx)(w.a,{}),Object(f.jsxs)("div",{className:e.paper,children:[Object(f.jsx)(O.a,{component:"h1",variant:"h5",children:"Connexion"}),Object(f.jsx)("form",{className:e.form,onSubmit:T,children:Object(f.jsxs)(m.a,{container:!0,direction:"column",children:[Object(f.jsx)(S.a,{variant:"outlined",type:"email",name:"username",id:"username",label:"Adresse email",margin:"normal",required:!0,fullWidth:!0,onChange:P}),Object(f.jsx)(S.a,{variant:"outlined",type:"password",label:"Mot de Passe",id:"pwd",name:"pwd",margin:"normal",required:!0,fullWidth:!0,onChange:P}),Object(f.jsx)(v.a,{variant:"contained",type:"submit",color:"primary",className:e.submit,children:"Connexion"}),x?Object(f.jsx)(O.a,{variant:"subtitle1",style:{color:"red"},children:x.message}):void 0]})}),Object(f.jsxs)(O.a,{variant:"subtitle1",children:["Pas encore de compte? ",Object(f.jsx)(j.b,{to:"/signup",children:"Cr\xe9ez en un ici!"})]})]})]})}var G,R=n(114),V=n(111),B=n(193),J=n(181),z=n(182),H=n(185),Q=n(183),U=n(184),_=Object(b.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)}}})),K=Object(N.a)(G||(G=Object(I.a)(["\n    mutation editCharacter($char: CharacterInput!) {\n        editCharacter(character: $char){\n            id\n            name\n            rank\n            skillpoints\n            health\n            attack\n            defense\n            magik\n            userId\n        }\n    }\n        \n"])));function X(e){var t,n=Object(a.useState)(e.open),r=Object(C.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(null!==(t=e.character)&&void 0!==t?t:{name:"",skillpoints:12,health:10,attack:0,defense:0,magik:0,rank:1}),s=Object(C.a)(o,1)[0],d=Object(l.useMutation)(K),j=Object(C.a)(d,1)[0],u=Object(a.useState)(),b=Object(C.a)(u,2),h=b[0],O=b[1],g=Object(a.useState)(s.skillpoints),p=Object(C.a)(g,2),x=p[0],y=p[1],k=Object(a.useState)(s.health),I=Object(C.a)(k,2),N=I[0],M=I[1],q=Object(a.useState)(s.attack),D=Object(C.a)(q,2),P=D[0],T=D[1],A=Object(a.useState)(s.defense),E=Object(C.a)(A,2),F=E[0],L=E[1],$=Object(a.useState)(s.magik),W=Object(C.a)($,2),G=W[0],R=W[1],V=_(),X=function(){c(!1)};Object(a.useEffect)((function(){e.open&&c(e.open)}),[e]);var Y=function(e){switch(e){case"health":return{value:N,handler:M};case"attack":return{value:P,handler:T};case"defense":return{value:F,handler:L};case"magik":return{value:G,handler:R};default:return{value:0,handler:function(){console.error("Attribute not found")}}}},Z=function(e){var t=Y(e),n="health"===e?1:Math.ceil((null===t||void 0===t?void 0:t.value)/5);x>0&&(0===n&&(n=1),x>=n&&t.handler((null===t||void 0===t?void 0:t.value)+1),y(x-n<0?0:x-n))},ee=function(e){var t=Y(e),n="health"===e?1:Math.ceil((null===t||void 0===t?void 0:t.value)/5);x<N+P+F+G+x&&(0===n&&(n=1),(t.value-1>=0||t.value-1>=s[e])&&t.handler(t.value-1),y(x+n))},te=function(e,t){var n=Y(e);if("add"===t){var a="health"===e?1:Math.ceil((null===n||void 0===n?void 0:n.value)/5);if(x<a)return!0}else if(s&&s[e]===n.value)return!0},ne=function(e){O(e.target.value)};return Object(f.jsxs)(B.a,{open:i,onClose:X,children:[Object(f.jsx)(w.a,{}),Object(f.jsxs)(J.a,{children:[e.character?"Editer":"Cr\xe9er"," un Personnage"]}),Object(f.jsxs)("form",{onSubmit:function(t){var n;t.preventDefault();var a={id:null!==(n=s.id)&&void 0!==n?n:void 0,name:h,health:N,attack:P,defense:F,magik:G,skillpoints:x,rank:s.rank,userId:e.userId};console.log(a),j({variables:{char:a}}),e.action(!0),c(!1)},className:V.form,children:[Object(f.jsx)(z.a,{children:Object(f.jsxs)(m.a,{container:!0,direction:"column",justify:"center",children:[e.character?Object(f.jsx)(S.a,{name:"name",label:"Nom",id:"name",required:!0,margin:"normal",value:null===s||void 0===s?void 0:s.name,onChange:ne,disabled:!0}):Object(f.jsx)(S.a,{name:"name",label:"Nom",id:"name",required:!0,margin:"normal",onChange:ne}),Object(f.jsx)(S.a,{name:"skillpoints",label:"Points de comp\xe9tence",id:"skillpoints",disabled:!0,value:x,margin:"normal"}),Object(f.jsxs)(m.a,{container:!0,item:!0,direction:"row",justify:"center",children:[Object(f.jsx)(v.a,{color:"primary",onClick:function(){return ee("health")},disabled:te("health","remove"),children:Object(f.jsx)(Q.a,{})}),Object(f.jsx)(S.a,{name:"health",label:"Endurance",id:"health",disabled:!0,value:N,margin:"normal"}),Object(f.jsx)(v.a,{color:"primary",onClick:function(){return Z("health")},disabled:te("health","add"),children:Object(f.jsx)(U.a,{})})]}),Object(f.jsxs)(m.a,{container:!0,item:!0,direction:"row",justify:"center",children:[Object(f.jsx)(v.a,{color:"primary",onClick:function(){return ee("attack")},disabled:te("attack","remove"),children:Object(f.jsx)(Q.a,{})}),Object(f.jsx)(S.a,{name:"attack",label:"Attaque",id:"attack",disabled:!0,value:P,margin:"normal"}),Object(f.jsx)(v.a,{color:"primary",onClick:function(){return Z("attack")},disabled:te("attack","add"),children:Object(f.jsx)(U.a,{})})]}),Object(f.jsxs)(m.a,{container:!0,item:!0,direction:"row",justify:"center",children:[Object(f.jsx)(v.a,{color:"primary",onClick:function(){return ee("defense")},disabled:te("defense","remove"),children:Object(f.jsx)(Q.a,{})}),Object(f.jsx)(S.a,{name:"defense",label:"Defense",id:"defense",disabled:!0,value:F,margin:"normal"}),Object(f.jsx)(v.a,{color:"primary",onClick:function(){return Z("defense")},disabled:te("defense","add"),children:Object(f.jsx)(U.a,{})})]}),Object(f.jsxs)(m.a,{container:!0,item:!0,direction:"row",justify:"center",children:[Object(f.jsx)(v.a,{color:"primary",onClick:function(){return ee("magik")},disabled:te("magik","remove"),children:Object(f.jsx)(Q.a,{})}),Object(f.jsx)(S.a,{name:"magik",label:"Magie",id:"magik",disabled:!0,value:G,margin:"normal"}),Object(f.jsx)(v.a,{color:"primary",onClick:function(){return Z("magik")},disabled:te("magik","add"),children:Object(f.jsx)(U.a,{})})]})]})}),Object(f.jsxs)(H.a,{children:[Object(f.jsx)(v.a,{onClick:X,color:"primary",children:"Annuler"}),Object(f.jsx)(v.a,{type:"submit",color:"primary",children:"Valider"})]})]})]})}var Y=n(186),Z=n(187);function ee(e){var t,n,a,r,i,c;return e.character?Object(f.jsx)(Y.a,{children:Object(f.jsx)(Z.a,{children:Object(f.jsxs)(m.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",direction:"column",children:[Object(f.jsx)(O.a,{variant:"h5",children:null===(t=e.character)||void 0===t?void 0:t.name}),Object(f.jsxs)(O.a,{variant:"h6",children:["Niveau: ",null===(n=e.character)||void 0===n?void 0:n.rank]}),Object(f.jsxs)(O.a,{variant:"h6",children:["Endurance: ",null===(a=e.character)||void 0===a?void 0:a.health]}),Object(f.jsxs)(O.a,{variant:"h6",children:["Attaque: ",null===(r=e.character)||void 0===r?void 0:r.attack]}),Object(f.jsxs)(O.a,{variant:"h6",children:["D\xe9fense: ",null===(i=e.character)||void 0===i?void 0:i.defense]}),Object(f.jsxs)(O.a,{variant:"h6",children:["Magik: ",null===(c=e.character)||void 0===c?void 0:c.magik]})]})})}):Object(f.jsx)(f.Fragment,{})}var te,ne,ae=n(64),re=Object(b.a)((function(e){return{create:{color:"white",textDecoration:"none"},empty:{height:"100%"},chargrid:{padding:"1rem"},charLabel:{padding:"1rem",textAlign:"center","&:hover":{cursor:"pointer"}},disabled:{padding:"1rem",textAlign:"center",backgroundColor:"lightslategrey","&:hover":{cursor:"not-allowed"}}}})),ie=Object(l.gql)(te||(te=Object(I.a)(["\n    query characters($userId: String){\n        characters(userId: $userId) {\n            name\n            rank\n            skillpoints\n            attack\n            health\n            defense\n            magik\n            id\n            lastFight\n        }\n    }\n"]))),ce=Object(l.gql)(ne||(ne=Object(I.a)(["\n    query fightsForCharacter($charId: String){\n        fightsForCharacter(charId: $charId){\n            id\n            player{\n                name\n            }\n            enemy{name}\n            winner{id}\n            looser{id}\n            date\n        }\n    }\n"])));function oe(e){var t=re(),n=Object(a.useState)(),r=Object(C.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(),s=Object(C.a)(o,2),d=s[0],u=s[1],b=Object(a.useState)(),h=Object(C.a)(b,2),g=h[0],p=h[1],x=Object(a.useState)(),y=Object(C.a)(x,2),k=y[0],I=y[1],w=Object(a.useState)(!1),S=Object(C.a)(w,2),N=S[0],M=S[1],D=Object(a.useState)(!1),P=Object(C.a)(D,2),T=P[0],A=P[1],E=Object(a.useState)(!1),F=Object(C.a)(E,2),L=F[0],$=F[1],W=q(),G=Object(V.a)(null===W||void 0===W?void 0:W.token).decodedToken,B=Object(l.useLazyQuery)(ie,{fetchPolicy:"no-cache"}),J=Object(C.a)(B,2),z=J[0],H=J[1],Q=H.loading,U=H.data,_=Object(l.useLazyQuery)(ce),K=Object(C.a)(_,2),Y=K[0],Z=K[1],te=Z.data,ne=Z.error,oe=function(e){var t=ae.DateTime.now(),n=ae.DateTime.fromMillis(parseInt(null===e||void 0===e?void 0:e.lastFight));return t.diff(n,"hours").hours>1||!e.lastFight};if(Object(a.useEffect)((function(){((null===G||void 0===G?void 0:G.id)&&!i||N)&&(k||I(G.id),z({variables:{userId:G.id}}),M(!1)),U&&(console.log("Character list:: ".concat(JSON.stringify(U))),c(U.characters)),te&&(console.log("fights:: ".concat(JSON.stringify(te))),p(te.fightsForCharacter))}),[k,G,U,z,N,te,ne,i]),Q)return Object(f.jsx)("div",{children:"loading"});var le=(null===i||void 0===i?void 0:i.length)<10;return!i||(null===i||void 0===i?void 0:i.length)<=0?Object(f.jsx)(m.a,{container:!0,direction:"row",justify:"center",className:t.empty,children:Object(f.jsx)(se,{userId:k,action:M})}):Object(f.jsxs)(m.a,{container:!0,direction:"row",children:[Object(f.jsxs)(m.a,{container:!0,item:!0,xs:6,direction:"column",children:[null===i||void 0===i?void 0:i.map((function(e){return Object(f.jsx)(m.a,{onClick:function(){return function(e){var t=null===i||void 0===i?void 0:i.find((function(t){return t.id===e}));t&&oe(t)&&(u(t),console.log("getting history"),Y({variables:{charId:e}}))}(e.id)},className:t.chargrid,children:Object(f.jsx)(R.a,{className:oe(e)?t.charLabel:t.disabled,children:Object(f.jsxs)(m.a,{container:!0,item:!0,direction:"row",justify:"space-evenly",alignItems:"center",children:[e.name," Niveau ",e.rank,e.skillpoints>0?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v.a,{onClick:function(){return A(!0)},color:"primary",variant:"outlined",children:"Monter de niveau"}),Object(f.jsx)(X,{open:T,userId:k,action:M,character:e})]}):void 0]})})},e.id)})),le?Object(f.jsx)(se,{userId:k,action:M}):void 0]}),Object(f.jsx)(m.a,{container:!0,item:!0,xs:6,direction:"column",alignItems:"center",justify:"center",children:d?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(m.a,{item:!0,container:!0,justify:"center",alignItems:"center",direction:"column",md:4,className:t.chargrid,children:Object(f.jsx)(ee,{character:d})}),Object(f.jsxs)(m.a,{item:!0,container:!0,alignItems:"center",justify:"space-evenly",direction:"row",children:[(null===g||void 0===g?void 0:g.length)>0?Object(f.jsx)(v.a,{color:"primary",variant:"outlined",onClick:function(){return $(!L)},children:"Historique"}):void 0,Object(f.jsx)(v.a,{color:"primary",variant:"contained",children:Object(f.jsx)(j.b,{to:"/arena?charId=".concat(d.id),className:t.create,children:"Entrer dans l'ar\xe8ne"})})]}),L?Object(f.jsx)(m.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",hidden:L,children:null===g||void 0===g?void 0:g.map((function(e){return Object(f.jsx)(R.a,{style:{padding:"1rem"},children:Object(f.jsxs)(m.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(f.jsxs)(O.a,{variant:"body1",children:["Le ",ae.DateTime.fromMillis(parseInt(e.date)).toLocaleString(ae.DateTime.DATETIME_MED)]}),Object(f.jsxs)(O.a,{variant:"body1",children:["Contre ",e.enemy.name]}),Object(f.jsx)(O.a,{variant:"body1",children:e.winner.id===d.id?"Victoire":"Defaite"})]})},null===g||void 0===g?void 0:g.indexOf(e))}))}):void 0]}):void 0})]})}function se(e){var t=re(),n=Object(a.useState)(!1),r=Object(C.a)(n,2),i=r[0],c=r[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v.a,{variant:"contained",color:"primary",className:t.create,onClick:function(){c(!0)},children:"Nouveau Personnage"}),Object(f.jsx)(X,{open:i,userId:e.userId,action:e.action})]})}var le,de=n(188),je=n(189),ue=Object(b.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},link:{textDecoration:"none",color:"white"}}}));function be(){var e=ue(),t=Object(u.g)(),n=q();return Object(f.jsx)(de.a,{position:"static",children:Object(f.jsxs)(je.a,{children:[Object(f.jsx)(O.a,{variant:"h6",className:e.title,children:Object(f.jsx)(j.b,{to:"/",className:e.link,children:"Mon petit RPG"})}),(null===n||void 0===n?void 0:n.token)?Object(f.jsx)(v.a,{color:"inherit",onClick:function(){return n.signout((function(){return t.push("/")}))},children:"Me deconnecter"}):Object(f.jsx)(v.a,{color:"inherit",children:Object(f.jsx)(j.b,{to:"/character-select",className:e.link,children:"Me connecter"})})]})})}function he(e,t){return me.apply(this,arguments)}function me(){return(me=Object(k.a)(y.a.mark((function e(t,n){var a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={playerId:t,opponentId:n},e.next=3,fetch("api/fight",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 3:return e.next=5,e.sent.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oe=Object(N.a)(le||(le=Object(I.a)(["\n    query fight($charId: String!){\n        fightSetting(charId: $charId){\n            player{\n                id,\n                name,\n                health, \n                attack,\n                defense, \n                magik,\n                rank\n            },\n            opponent{\n                id,\n                name,\n                health, \n                attack,\n                defense, \n                magik,\n                rank\n            }\n        }\n    }\n"])));function ve(){var e=new URLSearchParams(Object(u.h)().search),t=Object(u.g)(),n=e.get("charId"),r=Object(a.useState)(n),i=Object(C.a)(r,1)[0],c=Object(l.useQuery)(Oe,{fetchPolicy:"network-only",variables:{charId:i}}).data,o=Object(a.useState)(null===c||void 0===c?void 0:c.fightSetting.opponent),s=Object(C.a)(o,2),d=s[0],j=s[1],b=Object(a.useState)(null===c||void 0===c?void 0:c.fightSetting.player),g=Object(C.a)(b,2),p=g[0],x=g[1],I=Object(a.useState)(),w=Object(C.a)(I,2),S=w[0],N=w[1],M=Object(a.useState)(),q=Object(C.a)(M,2),D=q[0],P=q[1],T=Object(a.useState)(!1),A=Object(C.a)(T,2),E=A[0],F=A[1],L=Object(a.useState)(!1),$=Object(C.a)(L,2),W=$[0],G=$[1];return Object(a.useEffect)((function(){c&&(console.log(c),x(c.fightSetting.opponent),j(c.fightSetting.player)),S&&G(!0)}),[i,c,S]),Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(t,n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(t,n);case 2:a=e.sent,console.log(a),N(a.reportList),P(a.winner);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}E&&!W&&function(t,n){e.apply(this,arguments)}(i,null===p||void 0===p?void 0:p.id)}),[E,null===p||void 0===p?void 0:p.id,i,W]),Object(f.jsx)(h.a,{style:{padding:"1rem"},children:Object(f.jsxs)(m.a,{container:!0,direction:"column",alignItems:"center",justify:"center",children:[Object(f.jsxs)(m.a,{container:!0,item:!0,justify:"center",direction:"column",alignItems:"center",children:[Object(f.jsxs)(m.a,{container:!0,item:!0,xs:6,direction:"row",justify:"space-evenly",alignItems:"center",style:{padding:"1rem"},children:[Object(f.jsx)(ee,{character:d}),Object(f.jsx)(O.a,{variant:"h4",children:"VS"}),Object(f.jsx)(ee,{character:p})]}),Object(f.jsx)(v.a,{color:"primary",variant:"contained",disabled:E||W,onClick:function(){F(!0)},children:"Attaquer !"})]}),Object(f.jsx)(m.a,{container:!0,item:!0,alignItems:"center",justify:"center",children:S?Object(f.jsxs)(m.a,{container:!0,item:!0,direction:"column",justify:"center",alignItems:"center",style:{padding:"1rem"},children:[Object(f.jsx)(O.a,{variant:"h5",children:D?"VICTOIRE":"DEFAITE"}),Object(f.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){t.goBack()},style:{padding:"1rem",margin:"auto"},children:"Revenir \xe0 la selection de personnage"})]}):void 0}),Object(f.jsx)(m.a,{item:!0,container:!0,direction:"column",xs:6,justify:"space-evenly",spacing:1,children:null===S||void 0===S?void 0:S.map((function(e){return Object(f.jsx)(m.a,{item:!0,container:!0,direction:"column",justify:"center",children:Object(f.jsx)(R.a,{children:Object(f.jsxs)(m.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(f.jsxs)(O.a,{children:["Tour n\xb0 ",e.roundNumber," :"]}),Object(f.jsxs)(O.a,{children:[null===d||void 0===d?void 0:d.name," inflige ",e.player.attackValue," points de d\xe9gats"]}),Object(f.jsxs)(O.a,{children:[null===p||void 0===p?void 0:p.name," perd ",e.enemy.healthLost," points de vie"]}),Object(f.jsxs)(O.a,{children:[null===p||void 0===p?void 0:p.name," inflige ",e.enemy.attackValue," points de d\xe9gats"]}),Object(f.jsxs)(O.a,{children:[null===d||void 0===d?void 0:d.name," perd ",e.player.healthLost," points de vie"]})]})})},null===S||void 0===S?void 0:S.indexOf(e))}))})]})})}function fe(e){var t=e.children,n=function(){var e=Object(a.useState)(sessionStorage.getItem("token")),t=Object(C.a)(e,2),n=t[0],r=t[1];return{token:n,signin:function(e,t){if(console.log(e),e)return P.signin((function(){sessionStorage.setItem("token",e),r(e),t()}))},signout:function(e){return P.signout((function(){sessionStorage.removeItem("token"),r(null),e()}))}}}();return Object(f.jsx)(M.Provider,{value:n,children:t})}function ge(e){var t=e.children,n=Object(s.a)(e,["children"]),a=q();return console.log(a),Object(f.jsx)(u.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){var n=e.location;return(null===a||void 0===a?void 0:a.token)?t:Object(f.jsx)(u.a,{to:{pathname:"/signin",state:{from:n}}})}}))}var pe=function(){var e=new l.ApolloClient({uri:"graphql",cache:new l.InMemoryCache});return Object(f.jsx)(h.a,{className:"master",children:Object(f.jsx)(d.ApolloProvider,{client:e,children:Object(f.jsx)(fe,{children:Object(f.jsxs)(j.a,{children:[Object(f.jsx)(be,{}),Object(f.jsxs)(u.d,{children:[Object(f.jsx)(u.b,{exact:!0,path:"/",children:Object(f.jsx)(p,{})}),Object(f.jsx)(u.b,{exact:!0,path:"/signup",children:Object(f.jsx)(F,{})}),Object(f.jsx)(u.b,{exact:!0,path:"/signin",children:Object(f.jsx)(W,{})}),Object(f.jsx)(ge,{path:"/character-select",children:Object(f.jsx)(oe,{})}),Object(f.jsx)(ge,{path:"/arena",children:Object(f.jsx)(ve,{})})]})]})})})})},xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,195)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(pe,{})}),document.getElementById("root")),xe()}},[[142,1,2]]]);
//# sourceMappingURL=main.81a5df1e.chunk.js.map